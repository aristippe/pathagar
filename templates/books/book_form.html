{% extends "base.html" %}
{% load i18n %}
{% load static from staticfiles %}

{% block title %}{% if action == 'add' %}
    Add Book
{% else %}
    Edit Book
{% endif %}
{% endblock %}

{% block script %}
    $(document).ready(function()
    {
    $(".hidden_body").hide();
    $(".hidden_head").click(function()
    {
    $(this).next(".hidden_body").slideToggle(100);
    });
    $('#id_dc_identifier').example('ISBN');
    });
{% endblock %}

{% block head %}
    <script type="text/javascript" src="{% static "js/RelatedObjectLookups.js" %}"></script>{% endblock %}

{% block content %}
{{ form.errors }}
    <form enctype="multipart/form-data"
            {% if action == 'add' %}
          action="{% url "book_add" %}"
            {% else %}
          action="{% url "book_edit" book.pk %}"
            {% endif %}
          method="POST">{% csrf_token %}
        <fieldset>
            <legend>
                {% if action == 'add' %}
                    Add Book
                {% else %}
                    Edit Book
                {% endif %}
            </legend>

            {% if form.non_field_errors %}
                <div class="alert alert-error">
                    <strong>{{ form.non_field_errors }}</strong>
                </div>
            {% endif %}

            {#<div class="col-sm-3 required"><label for="id_original_path">File:</div>#}
            {#<div class="col-sm-4">{{ form.original_path }}</div>#}
{#            {{ form.original_path.errors }}#}
            <br/>
            <div class="col-sm-3 required">{% trans "Title" %}:</div>
            <div class="col-sm-9">{{ form.a_title }}</div>
            {{ form.a_title.errors }}
            <br/>
            <div class="col-sm-3 required">{% trans "Author" %}:</div>
            <div class="col-sm-9">
{#                {{ form.authors.all|join:',' }}#}
                {% for author in form.authors.all %}
                    {{ author.name }}
                    {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </div>
            {{ form.authors.errors }}
            <br/>
            <div class="col-sm-3 required">{% trans "Status" %}:</div>
            <div class="col-sm-4">{{ form.a_status }}</div>
            {{ form.a_status.errors }}
            <br/>
            <div class="col-sm-3">
                {% trans "Tags" %}:</div>
            <div class="col-sm-9 last">{{ form.tags }}</div>
            <br/>
            <div class="col-sm-3">
                {% trans "Summary" %}:</div>
            <div class="col-sm-8"><textarea>{{ form.a_summary }}</textarea></div>
            <br/>
            <div class="col-sm-3">
                {% trans "Language" %}:</div>
            <div class="col-sm-4">
                {{ form.dc_language }}
            </div>
            <br/>

            <div>
                <p class="hidden_head">{% trans "Optional information" %} <a href="#">({% trans "click to expand" %})</a></p>
                <div class="hidden_body">
                    <div class="col-sm-3">{% trans "Category" %}:</div>
                    <div class="col-sm-4">{{ form.a_category }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Rights" %}:</div>
                    <div class="col-sm-4">{{ form.a_rights }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Publisher" %}:</div>
                    <div class="col-sm-4">{{ form.dc_publisher }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Issued" %}: </div>
                    <div class="col-sm-4">{{ form.dc_issued }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Identifier" %}: </div>
                    <div class="col-sm-4">{{ form.dc_identifier }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Downloads" %}:</div>
                    <div class="col-sm-4 last">{{ form.downloads }}</div>
                    <br/>
                    <div class="col-sm-3">{% trans "Cover image" %}: </div>
                    <div class="col-sm-4">{{ form.cover_img }}</div>
                    <br/>
                </div>
            </div>

            <div class="col-sm-4 prepend-21 last">
                <input type="submit"
                        {% if action == 'add' %}
                       value="Add">
                        {% else %}
                            value="{% trans "Edit" %}">
                        {% endif %}
            </div>
        </fieldset>
    </form>
{% endblock %}
